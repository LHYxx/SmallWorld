
# 人际关系网络

## 小世界理论
S. Milgram（1967）提出的小世界理论。
Milgram的实验内容：
+ 设计：选择一个随机起点，观察需要经过多少个中间人，能够到达目标点。
+ 规则：参与者只能将信件转发给能直呼其名的熟人，并请他继续转发；如果一个参与者不认识目标收信人，则他不能直接将信寄给他；参与者需力争让信件能尽早达到目的地

实验结果是平均中间人数为5-6人。远远低于预想距离。

实验揭示的核心内容是
+ 世界是小的（6度分割）：社会网络中包含丰富的短路径。
稍微玄学一点的说法是：在社会网络中，世界上任何两个人之间的平均距离为6。也就是说，任意两个看似风马牛不相干的人，通过6个朋友就可以联系起来。
+ “自动寻找”短路径：“有目的的转发”能“自动地”找到这些短路径。

这就是著名的小世界理论。

# 程序运行说明
## 前三步只需运行一遍。后面即可进行搜索。

	1. download_data()			#爬取数据，需要制定一个start_url，默认为鲁迅先生。爬取的人物数据默认保存在crawled_person_file中。为方便起见，关系数据单独拎出来一份，保存在crawled_relation_file中
	2. clean_data(crawled_person_file, cleaned_person_file)  # 清洗人物数据
	3. clean_relation_data(cleaned_person_file, crawled_relation_file, cleaned_relation_file)  # 清洗关系数据
	4. Search('cleaned_person_file_鲁迅.txt', '鲁迅', '杨幂')


# 名人关系验证
非常有意思的一个理论。设想一下，任意两个看起来八竿子打不着的人，其实都有冥冥中的某种联系……
那何不来亲自验证一下。

## 数据收集
大量的人物信息及其人物关系数据。这种数据确实不好找。
这里就使用百度百科上的人物关系数据。
鲁迅先生说过，“单是说不行，要紧的是做。”
这里以鲁迅先生为例：
![百度百科-鲁迅](https://github.com/LHYxx/LHYxx.github.io/blob/master/2020/03/04/%E5%90%8D%E4%BA%BA%E5%85%B3%E7%B3%BB%E5%9B%BE%E9%89%B4-%E5%B0%8F%E4%B8%96%E7%95%8C%E7%90%86%E8%AE%BA/%E7%99%BE%E5%BA%A6%E7%99%BE%E7%A7%91-%E9%B2%81%E8%BF%85.PNG "百度百科-鲁迅")
百度百科上每个人物都有其人物关系。
编写爬虫，从鲁迅先生开始，沿着其人物关系链开始扒取数据。

将爬取的全部人物数据保存在文件中。之后要对爬取的数据进行一定的清洗，因为百度百科上数据还是比较杂的，有些人物的信息已经找不到了，以及还有重名的人物等等。一开始没有考虑到人物数量会有那么大，也就没考虑有重名的人的情况。结果爬下来才发现，有重名的人那么多-\_-||。。。然后又重新为每个人增加了ID编号。

得到所有人物关系之后，做一个简单的可视化，由于人数太多，暂时不知道用什么方法能够清晰地展示那么大的图网络，这里只可视化了一种一小小小部分。
![关系1](https://github.com/LHYxx/LHYxx.github.io/blob/master/2020/03/04/%E5%90%8D%E4%BA%BA%E5%85%B3%E7%B3%BB%E5%9B%BE%E9%89%B4-%E5%B0%8F%E4%B8%96%E7%95%8C%E7%90%86%E8%AE%BA/%E5%85%B3%E7%B3%BB1.PNG "关系1")
![关系2](https://github.com/LHYxx/LHYxx.github.io/blob/master/2020/03/04/%E5%90%8D%E4%BA%BA%E5%85%B3%E7%B3%BB%E5%9B%BE%E9%89%B4-%E5%B0%8F%E4%B8%96%E7%95%8C%E7%90%86%E8%AE%BA/%E5%85%B3%E7%B3%BB2.PNG "关系2")
![关系3](https://github.com/LHYxx/LHYxx.github.io/blob/master/2020/03/04/%E5%90%8D%E4%BA%BA%E5%85%B3%E7%B3%BB%E5%9B%BE%E9%89%B4-%E5%B0%8F%E4%B8%96%E7%95%8C%E7%90%86%E8%AE%BA/%E5%85%B3%E7%B3%BB3.PNG "关系3")

# 关系搜索
有了关系图之后，现在想实现以下功能：
输入任意两个人物名字，输出两人之间的关系链。
问题就变成了一个图搜索问题。
这里实现了一个BFS搜索算法进行关系搜索。
具体的完整代码在下面给出。
给出一个模型的输出例子：
```
输入：鲁迅， 杨幂
输出：
鲁迅 - 战友 - 冯乃超
冯乃超 - 外甥女 - 李丹阳
李丹阳 - 老师 - 金铁霖
金铁霖 - 妻子 - 马秋华
马秋华 - 学生 - 曹芙嘉
曹芙嘉 - 老师 - 韩红
韩红 - 好友 - 谭维维
谭维维 - 好友 - 杨幂
```
项目完整代码[在这里~](https://github.com/LHYxx/SmallWorld)